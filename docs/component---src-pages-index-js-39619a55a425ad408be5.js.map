{"version":3,"sources":["webpack:///./src/pages/index.js","webpack:///./src/components/layout.js","webpack:///./src/components/seo.js","webpack:///./src/components/TorchCharacter.js","webpack:///./src/components/Torch.js"],"names":["__webpack_require__","r","__webpack_exports__","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","_components_layout__WEBPACK_IMPORTED_MODULE_1__","_components_seo__WEBPACK_IMPORTED_MODULE_2__","_components_Torch__WEBPACK_IMPORTED_MODULE_3__","IndexPage","a","createElement","title","text","rainbow","Layout","_ref","children","Fragment","SEO","description","lang","meta","site","_public_static_d_2417117884_json__WEBPACK_IMPORTED_MODULE_0__","data","metaDescription","siteMetadata","react__WEBPACK_IMPORTED_MODULE_1___default","react_helmet__WEBPACK_IMPORTED_MODULE_2___default","htmlAttributes","titleTemplate","name","content","property","concat","defaultProps","TorchCharacter","toggleHover","_this","props","hover","row","column","randomInt","min","max","Math","random","render","style","fontSize","this","size","color","flexGrow","textAlign","fontVariationSettings","width","weight","height","transition","level","transform","PointerEvent","react_default","onPointerOver","character","onMouseOver","React","Component","Torch","colors","background","_React$Component","call","Color","hsl","font","torch","cursors","state","grid","focus","cursor","altTest","replace","toUpperCase","ariaLabel","altText","resize","bind","_assertThisInitialized","reorient","newFocusPoint","componentDidMount","createGrid","refs","container","window","addEventListener","document","event","preventDefault","componentWillUnmount","removeEventListener","element","focalPoint","_this2","boundingBox","getBoundingClientRect","sizes","itemSize","rows","floor","columns","extraDiffusion","diffusionSteps","diffusionLevelWeights","weightStepDiff","previousWeight","diffusionLevelWidths","widthStepDiff","previousWidth","diffusionLevelColors","colorStepDiff","previousColor","matrixLength","textFillRepeats","length","matrixString","Array","fill","join","substring","diffusionMatrix","contents","push","_loop","forEach","rowIndex","columnIndex","neighborsHaveLevel","matrix","stringPosition","createGridItem","h","s","l","setState","prevState","left","doesMatrixPositionExist","right","top","bottom","_this3","renderMatrix","rowStyle","display","flexWrap","justifyContent","rowContents","components_TorchCharacter","key","ref","aria-label","backgroundColor","userSelect","overflow","flexDirection","alignContent"],"mappings":"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","file":"component---src-pages-index-js-39619a55a425ad408be5.js","sourcesContent":["import React from \"react\"\n\nimport Layout from \"../components/layout\"\nimport SEO from \"../components/seo\"\n\nimport Torch from \"../components/Torch\"\n\nconst IndexPage = () => (\n  <Layout>\n    <SEO title=\"Home\" />\n    <Torch text=\"Nathan Crank\" rainbow={true}/>\n  </Layout>\n)\n\nexport default IndexPage\n","/**\n * Layout component that queries for data\n * with Gatsby's useStaticQuery component\n *\n * See: https://www.gatsbyjs.org/docs/use-static-query/\n */\n\nimport React from \"react\"\nimport PropTypes from \"prop-types\"\n\nimport \"./layout.css\"\nimport \"../fonts/gingham/gingham.css\"\n\nconst Layout = ({ children }) => {\n  return (\n    <>\n      <main>{children}</main>\n    </>\n  )\n}\n\nLayout.propTypes = {\n  children: PropTypes.node.isRequired,\n}\n\nexport default Layout\n","/**\n * SEO component that queries for data with\n *  Gatsby's useStaticQuery React hook\n *\n * See: https://www.gatsbyjs.org/docs/use-static-query/\n */\n\nimport React from \"react\"\nimport PropTypes from \"prop-types\"\nimport Helmet from \"react-helmet\"\nimport { useStaticQuery, graphql } from \"gatsby\"\n\nfunction SEO({ description, lang, meta, title }) {\n  const { site } = useStaticQuery(\n    graphql`\n      query {\n        site {\n          siteMetadata {\n            title\n            description\n            author\n          }\n        }\n      }\n    `\n  )\n\n  const metaDescription = description || site.siteMetadata.description\n\n  return (\n    <Helmet\n      htmlAttributes={{\n        lang,\n      }}\n      title={title}\n      titleTemplate={`%s | ${site.siteMetadata.title}`}\n      meta={[\n        {\n          name: `description`,\n          content: metaDescription,\n        },\n        {\n          property: `og:title`,\n          content: title,\n        },\n        {\n          property: `og:description`,\n          content: metaDescription,\n        },\n        {\n          property: `og:type`,\n          content: `website`,\n        }\n      ].concat(meta)}\n    />\n  )\n}\n\nSEO.defaultProps = {\n  lang: `en`,\n  meta: [],\n  description: ``,\n}\n\nSEO.propTypes = {\n  description: PropTypes.string,\n  lang: PropTypes.string,\n  meta: PropTypes.arrayOf(PropTypes.object),\n  title: PropTypes.string.isRequired,\n}\n\nexport default SEO\n","import React from \"react\"\n\nclass TorchCharacter extends React.Component {\n\ttoggleHover = () => {\n\t\tthis.props.hover(this.props.row, this.props.column)\n\t}\n\n\trandomInt(min, max) {\n\t\treturn Math.random() * (max - min) + min\n\t}\n\n\trender() {\n\t\tlet style = {\n\t\t\tfontSize: this.props.size,\n\t\t\tcolor: this.props.color,\n\t\t\tflexGrow: `1`,\n\t\t\ttextAlign: `center`,\n\t\t\tfontVariationSettings: `'wdth' ${this.props.width}, 'wght' ${this.props.weight}`,\n\t\t\twidth: this.props.size +'px',\n\t\t\theight: this.props.size +'px',\n\t\t\ttransition: `color .1s ease-in-out, font-variation-settings .1s ease-in-out, rotate .1s ease-in-out`\n\t\t}\n\t\tif ( this.props.level > 0 ) {\n\t\t\tstyle.transform = `rotate(${this.randomInt(-30,30)}deg)`\n\t\t}\n\t\tif (typeof PointerEvent === \"function\") {\n\t\t\treturn (\n\t\t\t  <span\n\t\t\t  \tonPointerOver={this.toggleHover}\n\t\t\t  \tstyle={style}\n\t\t\t  >\n\t\t\t    {this.props.character}\n\t\t\t  </span>\n\t\t\t)\n\t\t} else {\n\t\t\treturn (\n\t\t\t  <span\n\t\t\t  \tonMouseOver={this.toggleHover}\n\t\t\t  \tstyle={style}\n\t\t\t  >\n\t\t\t    {this.props.character}\n\t\t\t  </span>\n\t\t\t)\n\t\t}\n\t}\n}\n\nexport default TorchCharacter","import React from \"react\"\nimport Color from \"color\"\n\nimport TorchCharacter from \"./TorchCharacter\"\n\nclass Torch extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tlet colors = {\n\t\t\tbackground: this.props.background ? Color(this.props.background).hsl() : Color(\"#272727\").hsl(),\n\t\t\tfont: this.props.background ? Color(this.props.background).hsl() : Color(\"black\").hsl(),\n\t\t\ttorch: this.props.background ? Color(this.props.background).hsl() : Color(\"white\").hsl(),\n\t\t}\n\t\tthis.cursors = [\"mouse\", \"rat\", \"face\"]\n\t\tthis.state = {\n\t\t\tgrid: {},\n\t\t\tcolors: colors,\n\t\t\tfocus: { row:-1, column:-1 },\n\t\t\tcursor: this.cursors[0]\n\t\t}\n\t\tthis.altTest = this.props.text ? this.props.text : \"TorchDemo\"\n\t\tthis.text = this.props.text ? this.props.text.replace(/\\s+/g, '').toUpperCase() : \"TorchDemo\".toUpperCase()\n\t\tthis.ariaLabel = \"A torch demo with the text \" + this.altText + \" repeating\"\n\t\tthis.resize = this.resize.bind(this)\n\t\tthis.reorient = this.reorient.bind(this)\n\t\tthis.newFocusPoint = this.newFocusPoint.bind(this)\n\t}\n\n\tcomponentDidMount() {\n  \tthis.createGrid( this.refs.container, this.state.focus )\n  \twindow.addEventListener(\"resize\", this.resize)\n  \twindow.addEventListener(\"orientationchange\", this.reorient)\n  \tdocument.addEventListener(\"contextmenu\", event => event.preventDefault())\n  }\n\n  componentWillUnmount() {\n  \twindow.removeEventListener(\"resize\", this.resize)\n  \twindow.removeEventListener(\"orientationchange\", this.reorient)\n  }\n\n\treorient() {\n\t\tthis.newFocusPoint(-1,-1)\n\t}\n\n  resize() {\n  \tthis.createGrid( this.refs.container, this.state.focus )\n  }\n\n\tcreateGrid( element, focalPoint ) {\n\t\t// I know this is too long of a function\n\t\tlet grid = {}\n\n\t\t// get element size\n\t\tlet boundingBox = element.getBoundingClientRect()\n\t\tlet sizes = {\n\t\t\twidth:\tboundingBox.width,\n\t\t\theight:\tboundingBox.height\n\t\t}\n\n\t\t// determine grid item size\n\t\tif ( sizes.width < 600 || sizes.height < 600 ) {\n\t\t\tgrid.itemSize = 75\n\t\t} else if ( sizes.width < 1200 || sizes.height < 1200 ) {\n\t\t\tgrid.itemSize = 150\n\t\t} else {\n\t\t\tgrid.itemSize = 200\n\t\t}\n\n\t\t// determine grid rows and columns\n\t\tgrid.rows = Math.floor( sizes.height / grid.itemSize )\n\t\tgrid.columns = Math.floor( sizes.width / grid.itemSize )\n\n\t\t// check if focal point needs to be recentered\n\t\tif ( focalPoint.row === -1 && focalPoint.column === -1 ) {\n\t\t\tfocalPoint.row = Math.floor( grid.rows / 2 )\n\t\t\tfocalPoint.column = Math.floor( grid.columns / 2 )\n\t\t}\n\n\t\t// determine appropriate levels of extra diffusion\n\t\t//   all grids get 2 diffusion levels by default\n\t\t//   dividing by x is a completely arbiratry choice\n\t\tgrid.extraDiffusion = Math.floor( ( grid.columns >= grid.rows ? grid.columns/8 : grid.rows/8 ) )\n\n\t\t// build diffusion info\n\t\tgrid.diffusionSteps = grid.extraDiffusion + 2\n\n\t\t// build diffusion weight - built around gingham\n\t\tgrid.diffusionLevelWeights = [ 300 ]\n\t\tlet weightStepDiff = 400/grid.diffusionSteps\n\t\tfor ( let level = 1; level < grid.diffusionSteps + 1 ; level++ ) {\n\t\t\tlet previousWeight = grid.diffusionLevelWeights[level - 1]\n\t\t\tlet weight = Math.floor( previousWeight + weightStepDiff )\n\t\t\tif ( weight > 700 ) {\n\t\t\t\tweight = 700\n\t\t\t} else if ( weight < 300 ) {\n\t\t\t\tweight = 300\n\t\t\t}\n\t\t\tgrid.diffusionLevelWeights[level] = weight\n\t\t}\n\n\t\t// build diffusion widths - built around gingham\n\t\tgrid.diffusionLevelWidths = [ 1 ]\n\t\tlet widthStepDiff = 150/grid.diffusionSteps\n\t\tfor ( let level = 1; level < grid.diffusionSteps + 1 ; level++ ) {\n\t\t\tlet previousWidth = grid.diffusionLevelWidths[level - 1]\n\t\t\tlet width = Math.floor( previousWidth + widthStepDiff )\n\t\t\tif ( width > 150 ) {\n\t\t\t\twidth = 150\n\t\t\t} else if ( width < 1 ) {\n\t\t\t\twidth = 1\n\t\t\t}\n\t\t\tgrid.diffusionLevelWidths[level] = width\n\t\t}\n\n\t\t//build diffusion colors\n\t\tgrid.diffusionLevelColors = [ this.state.colors.font ]\n\t\tlet colorStepDiff = (this.state.colors.torch.color[2] - this.state.colors.font.color[2])/grid.diffusionSteps\n\t\tfor ( let level = 1; level < grid.diffusionSteps + 1 ; level++ ) {\n\t\t\tlet previousColor = grid.diffusionLevelColors[level - 1]\n\t\t\tlet color = Color(previousColor).hsl()\n\t\t\tcolor.color[2] = Math.floor( color.color[2] + colorStepDiff )\n\t\t\tif ( color.color[2] > 100 ) {\n\t\t\t\tcolor.color[2] = 100\n\t\t\t} else if ( color.color[2] < 0 ) {\n\t\t\t\tcolor.color[2] = 0\n\t\t\t}\n\t\t\tgrid.diffusionLevelColors[level] = color\n\t\t}\n\n\t\t// build matrix string\n\t\tlet matrixLength = grid.columns * grid.rows\n\t\tlet textFillRepeats = Math.floor( matrixLength / this.text.length ) + 1\n\t\tlet matrixStringArray = new Array( textFillRepeats ).fill( this.text )\n\t\tlet matrixString = matrixStringArray.join( '' ).substring( 0, matrixLength )\n\n\t\t// build empty diffusion matrix\n\t\tgrid.diffusionMatrix = []\n\t\tfor ( let row = 0; row < grid.rows; row++ ) {\n\t\t\tlet contents = []\n\t\t\tfor ( let column = 0; column < grid.columns; column++ ) {\n\t\t\t\tcontents.push(0)\n\t\t\t}\n\t\t\tgrid.diffusionMatrix.push( contents )\n\t\t}\n\n\t\t// update with focal points\n\t\t// place center\n\t\tgrid.diffusionMatrix[focalPoint.row][focalPoint.column] = grid.diffusionSteps\n\t\t// loop thru each level\n\t\tfor ( let level = grid.diffusionSteps - 1; level > 0; level-- ) {\n\t\t\t// loop through each matrix element\n\t\t\tgrid.diffusionMatrix.forEach( (row, rowIndex) => {\n\t\t\t\trow.forEach( (column, columnIndex) => {\n\t\t\t\t\t// check if any neighbors have previous level\n\t\t\t\t\tif ( this.neighborsHaveLevel( grid.diffusionMatrix, level + 1, rowIndex, columnIndex ) && grid.diffusionMatrix[rowIndex][columnIndex] < level ) {\n\t\t\t\t\t\t// if so mark as this level\n\t\t\t\t\t\tgrid.diffusionMatrix[rowIndex][columnIndex] = level\n\t\t\t\t\t}\t\t\n\t\t\t\t})\n\t\t\t})\n\t\t}\n\n\t\t// build matrix from matrix string\n\t\tgrid.matrix = []\n\t\tlet stringPosition = 0\n\t\tfor ( let row = 0; row < grid.rows; row++ ) {\n\t\t\tlet contents = []\n\t\t\tfor ( let column = 0; column < grid.columns; column++ ) {\n\t\t\t\tlet level = grid.diffusionMatrix[row][column]\n\t\t\t\tcontents.push(\n\t\t\t\t\tthis.createGridItem(\n\t\t\t\t\t\tmatrixString[stringPosition],\n\t\t\t\t\t\tgrid.diffusionLevelColors[level],\n\t\t\t\t\t\trow,\n\t\t\t\t\t\tcolumn,\n\t\t\t\t\t\tlevel,\n\t\t\t\t\t\tgrid.diffusionLevelWeights[level],\n\t\t\t\t\t\tgrid.diffusionLevelWidths[level],\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t\tstringPosition++\n\t\t\t}\n\t\t\tgrid.matrix.push( contents )\n\t\t}\n\n\t\tif (this.props.rainbow) {\n\t\t\tlet colors = {\n\t\t\t\tbackground: Color({\n\t\t\t\t\th: this.randomInt(0,255),\n\t\t\t\t\ts: this.randomInt(0,255),\n\t\t\t\t\tl: this.randomInt(0,100)\n\t\t\t\t}),\n\t\t\t\tfont: Color({\n\t\t\t\t\th: this.randomInt(0,255),\n\t\t\t\t\ts: this.randomInt(0,255),\n\t\t\t\t\tl: this.randomInt(0,100)\n\t\t\t\t}),\n\t\t\t\ttorch: Color({\n\t\t\t\t\th: this.randomInt(0,255),\n\t\t\t\t\ts: this.randomInt(0,255),\n\t\t\t\t\tl: this.randomInt(0,100)\n\t\t\t\t})\n\t\t\t}\n\t\t\t// set state with new grid\n\t\t\tthis.setState( prevState => ({\n\t\t\t\tcolors: colors\n\t\t\t}))\n\t\t}\n\n\t\t// set state with new grid\n\t\tthis.setState( prevState => ({\n\t\t\tgrid: grid,\n\t\t\tfocus: focalPoint,\n\t\t\tcursor: this.cursors[this.randomInt(0,this.cursors.length)]\n\t\t}))\n\t}\n\n\tneighborsHaveLevel( matrix, level, row, column ) {\n\t\tlet left = ( this.doesMatrixPositionExist( matrix, row, column - 1 ) && ( matrix[row][column - 1] === level ) )\n\t\tlet right = ( this.doesMatrixPositionExist( matrix, row, column + 1 ) && ( matrix[row][column + 1] === level ) )\n\t\tlet top = ( this.doesMatrixPositionExist( matrix, row - 1, column ) && ( matrix[row - 1][column] === level ) )\n\t\tlet bottom = ( this.doesMatrixPositionExist( matrix, row + 1, column ) && ( matrix[row + 1][column] === level ) )\n\t\treturn left || right || top || bottom\n\t}\n\n\tdoesMatrixPositionExist(matrix, row, column) {\n\t\t// check if past length or below 0\n\t\treturn !( row > matrix.length - 1 || row < 0 || column > matrix[0].length - 1 || column < 0 )\n\t}\n\n\tcreateGridItem( character, color, row, column, level, weight, width ) {\n\t\treturn {\n\t\t\tcharacter: character,\n\t\t\tcolor: color,\n\t\t\tlevel: level,\n\t\t\trow: row,\n\t\t\tcolumn: column,\n\t\t\twidth: width,\n\t\t\tweight: weight\n\t\t}\n\t}\n\n\tnewFocusPoint(row, column) {\n\t\tthis.createGrid( this.refs.container, { row:row, column:column } )\n\t}\n\n\trandomInt(min, max) {\n\t\treturn Math.floor( Math.random() * (max - min) + min )\n\t}\n\n\trender() {\n\t\tlet renderMatrix = []\n\t\tlet rowStyle = {\n\t\t\tdisplay: `flex`,\n\t\t\tflexWrap: `nowrap`,\n\t\t\tjustifyContent: `space-between`\n\t\t}\n\t\tif ( this.state.grid.matrix ) {\n\t\t\tthis.state.grid.matrix.forEach( (row, rowIndex) => {\n\t\t\t\tlet rowContents = []\n\t\t\t\trow.forEach( column => {\n\t\t\t\t\trowContents.push(\n\t\t\t\t\t\t<TorchCharacter\n\t\t\t\t\t\t\tcharacter={column.character}\n\t\t\t\t\t\t\tsize={this.state.grid.itemSize}\n\t\t\t\t\t\t\tcolor={column.color}\n\t\t\t\t\t\t\tlevel={column.level}\n\t\t\t\t\t\t\tkey={(column.row * 10) + column.column}\n\t\t\t\t\t\t\thover={this.newFocusPoint}\n\t\t\t\t\t\t\trow={column.row}\n\t\t\t\t\t\t\tcolumn={column.column}\n\t\t\t\t\t\t\twidth={column.width}\n\t\t\t\t\t\t\tweight={column.weight}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)\n\t\t\t\t})\n\t\t\t\trenderMatrix.push(\n\t\t\t\t\t<div\n\t\t\t\t\t\tstyle={rowStyle}\n\t\t\t\t\t\tkey={rowIndex}\n\t\t\t\t\t>\n\t\t\t\t\t\t{rowContents}\n\t\t\t\t\t</div>\n\t\t\t\t)\n\t\t\t})\n\t\t}\n\n\t\treturn (\n\t\t  <div\n\t\t  \tref=\"container\"\n\t\t  \taria-label={this.ariaLabel}\n\t\t  \tstyle={{\n\t\t  \t\tbackgroundColor: this.state.colors.background,\n\t\t  \t\ttransition: `background-color .1s ease-in-out`,\n\t\t\t  \tuserSelect: `none`,\n\t\t  \t}}\n\t\t  >\n\t\t  \t<div\n\t\t  \t\tstyle={{\n\t\t  \t\t\twidth: `100vw`,\n\t\t  \t\t\theight: `100vh`,\n\t\t  \t\t\toverflow: `hidden`,\n\t\t\t  \t\tdisplay: `flex`,\n\t\t\t  \t\tflexDirection: `column`,\n\t\t\t  \t\tjustifyContent: `space-between`,\n\t\t\t  \t\talignContent: `strech`,\n\t\t\t  \t\tcursor: `url('cursors/${this.state.cursor}.png'), ne-resize`\n\t\t  \t\t}}\n\t\t  \t>\n\t\t  \t\t{renderMatrix}\n\t\t  \t</div>\n\t\t  </div>\n\t\t)\n\t}\n}\n\nexport default Torch"],"sourceRoot":""}